<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Citegeist</title>
    <!-- favicon -->
    <link rel="icon" type="image/x-icon" href="static/favicon.png">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="static/main.css" rel="stylesheet">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-light">
        <div class="container-fluid">
            <span class="navbar-brand mb-0 h1">Citegeist</span>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="content-container shadow rounded">
        <h2 class="text-center mb-4" style="color: #B31B1B;">Find Related Works</h2>

        <!-- Toggle Switch for Input Type -->
        <div class="toggle-container">
            <label>Text Input</label>
            <label class="toggle-switch">
                <input type="checkbox" id="input-toggle">
                <span class="toggle-slider"></span>
            </label>
            <label>PDF Upload</label>
        </div>

        <!-- Abstract Input -->
        <div id="text-input-section" class="mb-4">
            <label for="abstract-input" class="form-label">Enter Your Abstract</label>
            <textarea id="abstract-input" class="form-control" placeholder="Paste your abstract here..."></textarea>
        </div>

        <!-- PDF Upload Section -->
        <div id="pdf-input-section" class="mb-4" style="display: none;">
            <label for="pdf-file-input" class="form-label">Upload PDF</label>
            <div class="pdf-upload-container">
                <input type="file" id="pdf-file-input" accept=".pdf">
                <button class="btn btn-primary" onclick="document.getElementById('pdf-file-input').click()">Choose File</button>
                <span id="pdf-file-name">No file selected</span>
            </div>
        </div>

        <!-- Sliders -->
        <div>
            <div class="slider-container">
                <label for="slider-breadth" class="form-label">Breadth</label>
                <input type="range" class="form-range" id="slider-breadth" min="5" max="20" step="1" value="10">
                <span id="slider-breadth-value" class="slider-value">10</span>
            </div>
            <div class="slider-container">
                <label for="slider-depth" class="form-label">Depth</label>
                <input type="range" class="form-range" id="slider-depth" min="1" max="5" step="1" value="2">
                <span id="slider-depth-value" class="slider-value">2</span>
            </div>
            <div class="slider-container">
                <label for="slider-diversity" class="form-label">Diversity</label>
                <input type="range" class="form-range" id="slider-diversity" min="0" max="1" step="0.1" value="0">
                <span id="slider-diversity-value" class="slider-value">0</span>
            </div>
        </div>

        <!-- Generate Button -->
        <div class="text-center mt-4 mb-4">
            <button id="generate-button" class="btn btn-primary btn-lg w-100">Generate</button>
            <p class="info-text">
                We will search through the entire arXiv corpus and find related works based on your input.
            </p>
        </div>

        <!-- Progress Bar Section -->
        <div id="progress-section" class="mt-3 mb-4" style="display: none;">
            <div class="d-flex justify-content-between mb-1">
                <span id="progress-text" class="text-muted">Processing job...</span>
                <span id="progress-percentage" class="fw-bold">0%</span>
            </div>
            <div class="progress">
                <div
                    id="progress-bar"
                    class="progress-bar"
                    role="progressbar"
                    aria-valuenow="0"
                    aria-valuemin="0"
                    aria-valuemax="100"
                    style="width: 0%">
                </div>
            </div>
        </div>

        <!-- Related Works Output -->
        <div class="mb-4" id="related-works-section" style="display: none;">
            <label for="related-works-output" class="form-label">Generated Related Works Section</label>
            <div id="related-works-output" class="output-field">
                <!-- Related works content will be injected here -->
            </div>
        </div>

        <!-- Citations Output -->
        <div id="citations-section" style="display: none;">
            <label for="citations-output" class="form-label">Citations</label>
            <div id="citations-output" class="citations-field">
                <!-- Citations content will be injected here -->
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JS -->
    <script src="static/main.js"></script>
</body>
</html>
def evaluate_relevance(input_abstract: str, identified_abstracts: list, prompting_client, model_version: str):
    """Evaluate the relevance of identified abstracts to the input abstract."""
    relevance_scores = []
    for identified_abstract in identified_abstracts:
        # Generate a relevance prompt
        prompt = f"""
        Input Abstract:
        {input_abstract}

        Identified Abstract:
        {identified_abstract}

        On a scale of 1 to 10, where 1 is completely irrelevant and 10 is highly relevant, 
        how relevant is the identified abstract to the input abstract? Provide your rating and a brief explanation.
        """
        # Prompt the language model
        response = prompting_client.get_completions(prompt, model_version)
        relevance_scores.append(response)

    return relevance_scores


def compare_related_works(input_related_work: str, synthetic_related_work: str, prompting_client, model_version: str):
    """Compare input and synthetic related works sections."""
    # Generate a comparison prompt
    prompt = f"""
    Here are two related works sections:

    1. Input Related Work:
    {input_related_work}

    2. Synthetic Related Work:
    {synthetic_related_work}

    Which one is better written and provides more relevant context for a research paper? Provide a preference and a justification.
    """
    # Prompt the language model
    response = prompting_client.get_completions(prompt, model_version)

    return response


if __name__ == "__main__":
    # Input abstract and identified results
    input_abstract = "Your input abstract here"
    identified_abstracts = [obj["abstract"] for obj in res]  # Extract abstracts from Milvus results

    # Step 1: Evaluate Relevance
    relevance_scores = evaluate_relevance(
        input_abstract, identified_abstracts, prompting_client, AZURE_PROMPTING_MODEL_VERSION
    )
    print("Relevance Scores:", relevance_scores)

    # Step 2: Compare Related Works
    input_related_work = "Input related works section"
    synthetic_related_work = "Synthetic related works section generated by the model"
    comparison_result = compare_related_works(
        input_related_work, synthetic_related_work, prompting_client, AZURE_PROMPTING_MODEL_VERSION
    )
    print("Comparison Result:", comparison_result)
